<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="partner_inherit_form" model="ir.ui.view">
            <field name="name">partner.inherit.form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <!-- Readonly Fields -->
                <xpath expr="//field[@id='company']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@id='individual']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='vat']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='phone']" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ['active', 'early','close','approve'])]}
                    </attribute>
                </xpath>
                <xpath expr="//field[@name='mobile']" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ['active', 'early','close','approve'])]}
                    </attribute>
                </xpath>
                <xpath expr="//field[@name='email']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='lang']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='type']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='parent_id']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='street']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='street2']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='city']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='state_id']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='zip']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='country_id']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <!-- Readonly Fields -->
                <xpath expr="//field[@name='function']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='website']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <field name="function" position="before">
                    <field name="identification_no" style="color:#008040;"
                           attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}" readonly="1"/>
                </field>
                <field name="category_id" position="replace">
                    <field name="sequence" invisible="1"/>
                </field>
                <field name="title" position="replace">
                    <field name="sequence" invisible="1"/>
                </field>
                <xpath expr="//form/div[@class='alert alert-warning oe_edit_only']" position="before">
                    <style>
                        .btn-gray{
                        color:#f8f9fa;
                        background-color: #6c757d;
                        }
                        .btn-yellow{
                        color:#f8f9fa;
                        background-color: #ffc107;
                        }
                        .btn-success{
                        color:#f8f9fa;
                        background-color: #28a745;
                        }
                        .btn-red{
                        color:#f8f9fa;
                        background-color: #dc3545;
                        }

                    </style>
                    <header>
                        <button name="action_done" state="draft" string="Submit"
                                class="btn-primary" type="object"
                                confirm="Are you sure you want to do this?"
                                attrs="{'invisible':[('state','in',('review done','create','decision','approve','contract','disburse','active','early','close','cancel','reject','archive'))]}"
                                groups="loan.group_admin"/>
                        <button name="action_cancel_sales" state="draft" string="Cancel" type="object"
                                attrs="{'invisible':[('state','in',('create','decision','approve','contract','disburse','active','early','close','cancel','reject','archive'))]}"
                                groups="loan.group_admin"/>
                        <button name="action_re_review" state="cancel" string="Re-Review"
                                class="btn-primary" type="object"
                                attrs="{'invisible':[('state','in',('draft','review done','create','decision','approve','contract','disburse','active','early','close'))]}"
                                groups="loan.group_admin"/>
                        <button name="action_reject" state="draft" string="Reject"
                                type="object"
                                confirm="Are you sure you want to do this?"
                                attrs="{'invisible':[('state','in',('review done','create','decision','approve','contract','disburse','active','early','close','cancel','reject'))]}"
                                groups="loan.group_admin"/>
                        <button name="limit_loan" string="Calculate"
                                type="object"
                                groups="loan.group_admin"
                                confirm="Are you sure you want to do this?"/>
                        <button name="action_installment" string="SIMAH CHECK"
                                type="object"
                                groups="loan.group_admin"
                                confirm="Are you sure you want to do this?"/>
                        <field name="state" widget="statusbar"
                               statusbar_visible=" "/>
                    </header>

                </xpath>
                <!--                <xpath expr="/form/sheet/group/group/div" position="after">-->
                <!--                    <field name="building_number" readonly="1"/>-->
                <!--                    <field name="unit_number" readonly="1"/>-->
                <!--                    <field name="additional_code" readonly="1"/>-->
                <!--                    &lt;!&ndash;                    <field name="is_customer" widget="boolean_toggle"/>&ndash;&gt;-->
                <!--                </xpath>-->
                <!--                <xpath expr="/form/sheet/group/group/field[@name='vat']" position="after">-->
                <group>
                    <group>
                        <field name="nationality"
                               attrs="{'readonly': [('state', 'in', ['active', 'approve', 'early','close'])]}"/>
                        <field name="gender" groups="loan.group_admin" readonly="1"/>
                        <field name="gender_simah" groups="loan.group_admin" readonly="1"/>
                        <field name="gender_elm" readonly="1"/>
                        <field name="nationality_code" groups="loan.group_admin"/>
                        <field name="gender_code" groups="loan.group_admin"/>
                        <field name="birth_of_date" readonly="1"/>
                        <field name="birth_of_date_hijri" widget="date_hijri" readonly="1"/>
                        <field name="age"
                               attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}" readonly="1"/>
                        <field name="marital_status"
                               attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"/>
                        <field name="certificate"
                               attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}" readonly="1"/>
                        <field name="employer" readonly="1"/>
                        <!--                        <field name="gov_sector"/>-->
                        <field name="sectors"
                               attrs="{'readonly': [('state', 'in', ['active', 'approve', 'early','close'])]}"/>
                        <field name="occupationCode" readonly="1"/>
                        <field name="years_retire" invisible="1"/>
                        <field name="request_date" invisible="1"/>
                        <field name="close_date" invisible="1"/>
                    </group>
                    <group>
                        <xpath
                                expr="//field[@name='lang']"
                                position="after">
                            <group>
                                <field name="sequence" invisible="1"/>
                                <field name="position"
                                       attrs="{'readonly': [('state', 'in', ['active', 'approve', 'early','close'])]}"/>
                                <field name="region"
                                       attrs="{'readonly': [('state', 'in', ['active', 'approve', 'early','close'])]}"/>
                                <field name="industry"
                                       attrs="{'readonly': [('state', 'in', ['active', 'approve', 'early','close'])]}"/>
                                <field name="home_type"
                                       attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"
                                       readonly="1"/>
                            </group>
                            <group>
                                <field name="annual_rent"
                                       attrs="{'invisible': [('home_type', '!=', 'owned')]}" readonly="1"/>
                                <field name="risk"
                                       attrs="{'readonly': [('state', 'in', ['active', 'approve', 'early','close'])]}"/>
                                <field name="place"
                                       attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"
                                       invisible="1" readonly="1"/>
                                <field name="release_of_date"
                                       attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"
                                       invisible="1" readonly="1"/>
                                <field name="expiry_of_date" readonly="1"/>
                                <!--                                attrs="{'readonly':[('state', '!=', 'draft'),('state', '!=', 'review done')]}"-->
                                <field name="expiry_of_date_hijri" groups="loan.group_admin" readonly="1"/>
                                <!--                                <field name="product_name"-->
                                <!--                                       attrs="{'readonly':[('state', '!=', 'draft'),('state', '!=', 'review done')]}"/>-->
                                <field name="type_loan"
                                       attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"
                                       readonly="1"/>
                                <field name="loan_purpose" readonly="1"/>
                                <field name="is_sales_manager" invisible="1"/>
                                <field name="service_provider"
                                       attrs="{'readonly': [('is_sales_manager', '=', False)]}"/>
                                <field name="hospital_quotation" readonly="1" invisible="1"/>
                                <field name="date_of_joining"
                                       attrs="{'readonly': [('state', 'in', ['active', 'approve', 'early','close'])]}"/>
                                <field name="years_work"
                                       attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"
                                       invisible="1"/>
                                <field name="duration_in_occupation" readonly="1"/>
                                <field name="quotation_number"/>
                                <field name="employmentStatus"/>
                                <!--                        <field name="communicat_type"-->
                                <!--                               attrs="{'readonly':[('state', '!=', 'draft'),('state', '!=', 'review done')]}"/>-->
                                <field name="communicat_phone"
                                       attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"
                                       invisible="1" readonly="1"/>
                            </group>
                        </xpath>
                    </group>
                </group>

                <group>
                    <field name="elm_res_partner" string="ELM Address" readonly="1">
                        <tree editable="bottom">
                            <field name="elm_city" readonly="1"/>
                            <field name="elm_district" readonly="1"/>
                            <field name="elm_street_name" readonly="1"/>
                            <field name="elm_additional_number" readonly="1"/>
                            <field name="elm_building_number" readonly="1"/>
                            <field name="elm_post_code" readonly="1"/>
                            <field name="elm_location_coordinates" readonly="1"/>
                        </tree>
                    </field>
                </group>
                <!--                </xpath>-->
                <xpath expr="/form/sheet/notebook/page[1]" position="before">
                    <page string="Financing Info" autofocus="autofocus" groups="loan.group_finance_loan">
                        <group>
                            <group>
                                <group string="Income" style="color:#008040;">
                                    <field name="basic_salary"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="home_allowance"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="transport_allowance" invisible="1"/>
                                    <field name="insurance_discount" invisible="1"/>
                                    <field name="other_allowance"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="other_income"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="check_deduction" widget="boolean_toggle" invisible="1"/>
                                    <field name="internal_deduction"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="total_income" sum="total_income"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="salary_rate" style="color:#008040;"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                </group>
                                <group string="Expenses" style="color:#008040;">
                                    <field name="education_exp" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="personal_care_exp" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="food_exp" style="color:Red;" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="tran_exp" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="cost_telecom" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="cost_home" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="cost_future" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="total_salary" sum="total_salary" invisible="1"/>
                                    <field name="loan_imit_percentage" invisible="1"
                                           attrs="{'readonly':[('state', '!=', 'new'),('state', '!=', 'return')]}"/>
                                    <field name="other_liability" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                    <field name="number_liability" force_save="1"
                                           attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                </group>
                            </group>
                            <group string="Liability" style="color:#008040;">
                                <field name="iban_number" default="SA"
                                       attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                <field name="bank_name"
                                       attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                <field name="sadad_number" invisible="1"/>
                                <field name="v_account" groups="loan.group_customer_operation" attrs="{'readonly': [('state', 'in', ['active', 'early', 'close'])]}"/>
                                <field name="iban_num"
                                       attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                <field name="down_payment" attrs="{'readonly':[('state','!=','simah')]}"/>
                                <field name="cost_insurance" invisible="1"/>
                                <field name="total_liability" invisible="1"/>
                                <field name="liability" invisible="1"/>
                                <field name="ratio" invisible="1"/>
                                <field name="number_liability_report" invisible="1"/>
                                <field name="rate_limit" invisible="1" force_save="1"/>
                                <field name="loan_amount" attrs="{'readonly':[('state','!=','simah')]}"/>
                                <field name="simah_amount" invisible="1"/>
                                <field name="compare_limit" style="color:#070c69;"
                                       attrs="{'readonly': [('state', 'in', ['active', 'early', 'close', 'approve'])]}"/>
                                <field name="loan_limit" invisible="1"/>
                                <field name="month_installment" invisible="1"/>
                                <field name="interest_amount" invisible="1"/>
                                <field name="total_loan" invisible="1"/>
                            </group>
                        </group>
                    </page>
                </xpath>
                <xpath expr="/form/sheet/notebook/page[2]" position="replace">
                    <page string="Simah" groups="loan.group_simah_access" invisible="1">
                        <group string="Loans and Advances" style="color:#008040;">
                            <field name="liability_ids">
                                <tree editable="bottom">
                                    <field name="liability_type"/>
                                    <field name="amount" sum="amount"/>
                                </tree>
                            </field>
                        </group>
                        <group string="Loans and Advances" style="color:#008040;">
                            <group>
                                <group>
                                    <field name="personal_loan"/>
                                    <field name="consumer_loan"/>
                                </group>
                                <group>
                                    <field name="rental_loan"/>
                                    <field name="credit_cards"/>
                                </group>
                            </group>
                            <group>
                                <group>
                                    <field name="home_loan"/>
                                    <field name="home_loans"/>
                                </group>
                                <group>
                                    <field name="gov_loan"
                                           attrs="{'invisible':[('home_loan','=',False)]}"/>
                                    <field name="installment_comp" force_save="1" style="color:#008040;"/>
                                    <field name="deduction_before"/>
                                </group>
                            </group>
                        </group>
                    </page>
                </xpath>
                <xpath expr="/form/sheet/notebook/page[4]" position="after">
                    <page string="Salary Certificate" groups="loan.group_function_credit">
                        <form>
                            <button name="action_reset"
                                    string="Reset" class="btn-primary" type="object"
                                    confirm="Are you sure you want to do this?"
                                    groups="loan.group_admin"/>
                            <sheet>
                                <notebook>
                                    <page name="private_sector" string="Private Sector">
                                        <button name="action_salary_certificate_data" string="private Certificate"
                                                class="btn-primary" type="object"
                                                confirm="Are you sure you want to do this?"
                                                groups="loan.group_loan_credit"
                                                attrs="{'invisible': [('bool_field', '=', True)]}"/>

                                        <field name="bool_field" invisible="0" groups="loan.group_admin"/>
                                        <field name="private_sector_ids" readonly="1">
                                            <tree editable="bottom">
                                                <field name="bool_field" invisible="1"/>
                                                <field name="employerName"/>
                                                <field name="dateOfJoining"/>
                                                <field name="fullName"/>
                                                <field name="basicWage"/>
                                                <field name="housingAllowance"/>
                                                <field name="otherAllowance"/>
                                                <field name="fullWage"/>
                                            </tree>
                                        </field>
                                    </page>
                                    <page name="government_sector" string="Government Sector">
                                        <button name="action_salary_certificate_gov" string="Government Certificate"
                                                class="btn-primary" type="object"
                                                confirm="Are you sure you want to do this?"
                                                groups="loan.group_loan_credit"
                                                attrs="{'invisible': [('bool_field', '=', True)]}"/>
                                        <field name="bool_field" invisible="0" groups="loan.group_admin"/>
                                        <field name="gov_sector_ids" readonly="1">
                                            <tree editable="bottom">
                                                <field name="employeeNameAr" invisible="1"/>
                                                <field name="agencyName"/>
                                                <field name="bankName"/>
                                                <field name="accountNumber"/>
                                                <field name="employeeJobTitle"/>
                                                <field name="agencyEmploymentDate"/>
                                                <field name="payMonth"/>
                                                <field name="basicSalary"/>
                                                <field name="netSalary"/>
                                                <field name="totalAllownces"/>
                                                <field name="totalDeductions"/>
                                            </tree>
                                        </field>
                                    </page>
                                </notebook>
                            </sheet>
                        </form>
                    </page>
                </xpath>
            </field>
        </record>

        <!--        <record id="view_partner_form_inherit" model="ir.ui.view">-->
        <!--            <field name="name">partner.form.inherit.hide.log.note</field>-->
        <!--            <field name="model">res.partner</field>-->
        <!--            <field name="inherit_id" ref="base.view_partner_form"/>-->
        <!--            <field name="arch" type="xml">-->
        <!--                &lt;!&ndash; Hide the "Log Note" button in the chatter &ndash;&gt;-->
        <!--                <xpath expr="//div[contains(@class, 'oe_chatter')]//a[contains(@class, 'o_chatter_button_log_note')]"-->
        <!--                       position="attributes">-->
        <!--                    <attribute name="style">display:none;</attribute>-->
        <!--                </xpath>-->
        <!--            </field>-->
        <!--        </record>-->

        <record id="loan_orders_smart_button" model="ir.ui.view">
            <field name="name">loan.orders.buttons</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" type="object" name="get_loan"
                            icon="fa-usd">
                        <field string="Loans" name="loan_count" widget="statinfo"/>
                    </button>
                    <button class="oe_stat_button" type="object" name="get_quotation"
                            icon="fa-hospital-o">
                        <field string="Quotations" name="quotation_count" widget="statinfo"/>
                    </button>
                </div>
            </field>
        </record>

        <record id="partner_id_action" model="ir.actions.act_window">
            <field name="name">Customer</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_id" ref="loan.partner_inherit_form"/>
            <!--            <field name="domain">[('allow_loan','=',True)]</field>-->
            <field name="view_mode">form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                </p>
            </field>
        </record>

        <record id="customer_id_search_view" model="ir.ui.view">
            <field name="name">Search</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_res_partner_filter"/>
            <field name="arch" type="xml">
                <field name="name" position="before">
                    <field name="identification_no" string="Id"/>
                </field>
                <field name="name" position="after">
                    <field name="state" string="Order Status"/>
                </field>
            </field>
        </record>

        <!--        <record model="ir.actions.server" id="limit_loan">-->
        <!--            <field name="name">calculate DBR</field>-->
        <!--            <field name="model_id" ref="loan.model_res_partner"/>-->
        <!--            <field name="binding_model_id" ref="loan.model_res_partner"/>-->
        <!--            <field name="binding_view_types">list</field>-->
        <!--            <field name="state">code</field>-->
        <!--            <field name="code">-->
        <!--                action = records.limit_loan()-->
        <!--            </field>-->
        <!--        </record>-->

        <menuitem name="Customers"
                  id="information_id"
                  parent="loan_root"
                  action="account.res_partner_action_customer"
                  sequence="1"/>


<!--        <menuitem name="Customer"-->
<!--                  id="customer_id"-->
<!--                  parent="information_id"-->
<!--                  action="partner_id_action"-->
<!--                  sequence="2"/>-->


    </data>
</odoo>